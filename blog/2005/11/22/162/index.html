<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
  <meta property="og:title" content="J2ASTask | tsuyuki.makoto" />
  <meta property="og:type" content="blog" />
  <meta property="og:image" content="http://2.gravatar.com/avatar/a49edf2521f9e75826c6546c7585f17a" />
  <meta property="og:url" content="http://www.tsuyukimakoto.com/2005/11/22/162/" />
  <meta property="og:site_name" content="tsuyuki.makoto" />
  <meta property="fb:admins" content="535742035" />
  <title>J2ASTask | tsuyuki.makoto</title>
<link rel="stylesheet" href="http://www.tsuyukimakoto.com/blog/css/gumby.css">
<link rel="stylesheet" href="http://www.tsuyukimakoto.com/blog/css/prism.css">
<link rel="stylesheet" href="http://www.tsuyukimakoto.com/blog/css/style.css">
<script src="http://www.tsuyukimakoto.com/blog/js/libs/modernizr-2.6.2.min.js"></script>
<script src="http://www.tsuyukimakoto.com/blog/js/libs/jquery-2.0.2.min.js"></script>
<script gumby-touch="js/libs" src="http://www.tsuyukimakoto.com/blog/js/libs/gumby.min.js"></script>
<script src="http://www.tsuyukimakoto.com/blog/js/libs/prism.js"></script>
</head>
<body>
  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=194346604081719";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  <div class="navbar" id="nav_top">
      <div class="row">
          <a class="toggle" gumby-trigger="#nav_top > .row > ul" href="#"><i class="icon-menu"></i></a>
          <h1 class="eight columns logo">
              <a href="http://www.tsuyukimakoto.com/">
                  <img src="http://www.tsuyukimakoto.com/blog/image/mainlogo.png" gumby-retina /> tsuyukimakoto
              </a>
          </h1>
          <ul class="four columns">
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/about/">About</a></li>
              <li class="field"><form action="http://www.google.co.jp/cse" id="cse-search-box">
            <input type="hidden" name="cx" value="partner-pub-6359580088223585:17om3l-wxlu" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="text" class="search input" type="search" name="q" size="10" />
            <input type="submit" class="google_search_button" name="sa" value="&#x691c;&#x7d22;" />
        </form>
        <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=ja"></script></li>
          </ul>
      </div>
  </div>
  <div class="row">
    <section class="two columns">
      <li class="success badge">2005-11-22 12:14:50</li><br />
      <li class="primary badge"><a href="https://plus.google.com/104851813299865505589?rel=author">by makoto tsuyuki</a></li>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="everes">Tweet</a>
      <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
      <g:plusone size="medium" href="http://www.tsuyukimakoto.com/2005/11/22/162/"></g:plusone><br />
      <div class="fb-like" data-layout="box_count" data-action="like" data-show-faces="true" data-send="false"></div>
      <div class="fb-like" data-layout="box_count" data-action="recommend" data-show-faces="true" data-send="false"></div>
    </section>
    <section class="ten columns">
    <h1>J2ASTask</h1>
    <p>JavaのクラスからFlexのRemote Service用のActionScriptを生成するantタスクをRevDBから切り出しました（バージョンアップもしてます0.1→0.2）。</p>
<p>The ant task which forms the ActionScript for the Remote Service of the Flex from class of Java was quarried out from the RevcDb, (doing also version rise, 0.1 where it increases -&gt; 0.2).</p>
<p>（ものすごいJ2ASは、ここではなくて、 <a class="reference external" href="http://osflash.org/doku.php?id=j2as">こっち</a> です。）</p>
<p>J2ASTaskの用途は、ものすごいJ2ASとは違い、Macromedia FlexのRemote Service限定です。</p>
<p>Remote Serviceで用いるJavaとのマッピングActionScriptは、プロパティとマッピング指定のみが必要で、かつ面倒くさい単純作業となる ため作成しました。</p>
<p>Use of the J2ASTask is different from the tremendous J2AS, it is Remote Service limitation of the Macromedia Flex. Only the property and mapping appointment being necessary, at the same time because it becomes troublesome monotonous work, it drew up the mapping ActionScript of the Java which is used with the Remote Service.</p>
<div class="section" id="function">
<h2>機能(Function)</h2>
<p>特定のパッケージに含まれる全てのJavaクラスをActionScriptに変換する。All Java classes which are included in the package of specification are converted to the ActionScript</p>
<p>JavaクラスのパッケージをActionScript上のパッケージに変換する。The package of Java class is converted to the package on the ActionScript</p>
<p>Javaの型をなんとなくActionScriptの型にする。Type of the Java how it is not and makes type of the ActionScript</p>
<p>ActionScriptのプロパティ宣言の直上にJavaの型をコメントでメモとして出力する。
It outputs type of the Java to just above of property declaration of the ActionScript with comment as memo</p>
<p>ActionScriptファイルはワークディレクトリに書き出す（毎回上書きする）。
It writes out the ActionScript file in the work directory, (each time it superscribes)</p>
</div>
<div class="section" id="requirements">
<h2>必要な物(Requirements)</h2>
<blockquote>
<ul class="simple">
<li>log4j-1.2.9.jar</li>
<li>commons-logging.jar</li>
<li>commons-io-1.1.jar</li>
<li>commons-collections-3.1.jar</li>
<li>velocity-1.4.jar</li>
</ul>
</blockquote>
</div>
<div class="section" id="usage">
<h2>使用方法(usage)</h2>
<p>antから使用します。You use from the ant.</p>
<div class="section" id="j2asbuild-xml">
<h3>j2asタスクをbuild.xmlに宣言します。</h3>
<p>J2as task is declared to the build.xml</p>
<pre><code class="language-markup">build.xml

  &lt;taskdef name="j2as"
           classname="net.everes.j2as.ant.J2AsTask"&gt;
      &lt;classpath&gt;
        &lt;pathelement location="./lib/J2AsTask-0.2.jar" /&gt;
        &lt;pathelement location="./lib/log4j-1.2.9.jar" /&gt;
        &lt;pathelement location="./lib/commons-logging.jar" /&gt;
        &lt;pathelement location="./lib/commons-io-1.1.jar" /&gt;
        &lt;pathelement location="./lib/commons-collections-3.1.jar" /&gt;
        &lt;pathelement location="./lib/velocity-1.4.jar" /&gt;
      &lt;/classpath&gt;
    &lt;/taskdef&gt;</code></pre></div>
<div class="section" id="j2astarget">
<h3>j2asタスクをtargetに指定します</h3>
<p>J2as task is appointed to the target</p>
<pre><code class="language-markup">build.xml

    &lt;target name="j2as.model"&gt;
      &lt;j2as
        work="./work"
        classDir="./classes"
        targetPackage="net.everes.j2as.model"
        projectName="j2as"
        packageMapping="net.everes.j2as.model:model,net.everes.j2as.data:data"
        /&gt;
    &lt;/target&gt;</code></pre><ul>
<li><p class="first">work</p>
<p>ワークディレクトリ。ここにActionScriptファイルが生成されます。 Work directory. The ActionScript file is formed here.</p>
</li>
<li><p class="first">classDir</p>
<p>対象のクラスの含まれるディレクトリを指定する（パッケージは含まない。クラスパス） Appoints the directory where class of object is included (the package is not included. CLASSPATH) &gt; -   targetPackage: 対象のパッケージを指定する The package of the object is appointed</p>
</li>
<li><p class="first">projectName</p>
<p>（省略可）JavaのプロパティがNumber,Boolean,Date,Listにマッピングできなかった場合に、Javaのクラス名に projectNameのパッケージが見つかった場合は、そのパッケージ文字列以降をActionScriptのクラス名としてマッピングする。 (Abbreviation yes) the property of the Java when when in the Number, the Boolean, the Date and the List mapping it is not possible, the package of the projectName is found in class name of the Java, mapping it does with after that package character string as a class name of the ActionScript.</p>
</li>
<li><p class="first">packageMapping</p>
<p>（省略可）JavaのクラスパッケージとActionScriptのクラスパッケージのマッピング情報を指定する。「: 」で区切られたJavaのパッケージとActionScriptのパッケージペアを「,」で区切って複数指定可能 (Abbreviation yes) mapping information of the package of the Java and the package of the ActionScript is appointed. &quot;: &quot; With &quot;, &quot; with dividing the package of the Java which was divided and the package pair of the ActionScript, plural designated possibilities</p>
</li>
</ul>
<p>※親クラスを自動的にリバースしたりはしませんので、必要なだけj2asタスクタグを使用してください。 It's not reverses super class automatically, please use as much as the necessary j2as task tag.</p>
<p>※変換されるプロパティは、publicなアクセサを持つものだけです The property which is converted is the public just those which have accesser method.</p>
</div>
</div>

      <div class="row">
        <section class="centered three columns">
          <li class="label info">みなさんのコメント</li>
        </section>
        <section class="eleven columns">
          <ul>
          
          </ul>
        </section>
      </div>
      <div class="fb-comments" data-href="http://www.tsuyukimakoto.com/2005/11/22/162/" data-numposts="5"></div>
    </section>
  </div>
  <div class="navbar pretty" id="nav_bottom">
    <div class="row">
      <a class="toggle" gumby-trigger="#nav_bottom > .row > ul" href="#"><i class="icon-menu"></i></a>
      <ul class="twelve columns">
      <li class="medium info btn icon-left entypo icon-fast-backward"><a href="http://www.tsuyukimakoto.com/blog/2005/11/20/161/">生協の白石さんＣＭ</a></li>
      <li class="medium info btn icon-right entypo icon-fast-forward"><a href="http://www.tsuyukimakoto.com/blog/2005/11/24/163/">script.aculo.us</a></li>
      </ul>
    </div>
  </div>
</body>
</html>